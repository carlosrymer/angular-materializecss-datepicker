!function(){"use strict";function _buildRow(options){for(var isVisible,row=[],currentMonthAndYear=options.date.getMonth()===options.now.getMonth()&&options.date.getFullYear()===options.now.getFullYear(),i=(options.date.getMonth()===options.selectedDate.getMonth()&&options.selectedDate.getFullYear()===options.date.getFullYear(),options.firstDay);i<options.lastDay;i++)isVisible=i>=0&&i<options.daysInMonth&&!(currentMonthAndYear&&(new Date).getDate()>i+1),row.push({isToday:isVisible&&options.now.getDate()-1===i,selected:currentMonthAndYear&&options.selectedDate.getDate()-1===i,value:i+1,visible:isVisible});return row}function _daysInMonth(year,month){return new Date(year,month+1,0).getDate()}function _getFirstDay(year,month){return new Date(year,month,1).getDay()}function _getRows(date,selectedDate){for(var firstDay=_getFirstDay(date.getFullYear(),date.getMonth()),daysInMonth=_daysInMonth(date.getFullYear(),date.getMonth()),daysInView=daysInMonth+firstDay,numberOfRows=Math.round(daysInView/7),rows=[],options={date:new Date(date.getTime()),daysInMonth:daysInMonth,now:new Date,selectedDate:new Date(selectedDate.getTime()),startDay:firstDay},i=0;numberOfRows>i;i++)options.firstDay=7*i-firstDay,options.lastDay=options.firstDay+7,rows.push(_buildRow(options));return rows}function _getYears(){return[1].reduce(function(previous,current){return previous.push(previous[previous.length-1]+1),previous},[(new Date).getFullYear()])}function MaterializeDatePickerCtrl($compile,$element,$filter,$rootScope,$scope,$templateCache,DatePickerYears){function _close(){picker&&picker.remove()}function _open(e){picker=$compile(tpl)($scope),$element.after(picker),e.preventDefault(),angular.element(picker[0].querySelector(".picker__holder")).on("click",_close),angular.element(picker[0].querySelector(".picker__wrap")).on("click",function(e){e.stopPropagation()})}function _update(date){model.$setViewValue($filter("date")(date,"longDate")),model.$render()}var picker,tpl=$templateCache.get("angular-materializecss-datepicker-template.tpl.html"),now=new Date,model=$element.controller("ngModel"),date=model.$modelValue&&new Date(model.$modelValue)>=now?new Date(model.$modelValue):now;angular.extend(this,{disableNextMonth:date.getFullYear()===now.getFullYear()+1&&11===date.getMonth(),disablePreviousMonth:date.getFullYear()===now.getFullYear()&&date.getMonth()===now.getMonth(),selectedDate:date,view:{date:new Date(date.getTime()),rows:_getRows(date,date),year:date.getFullYear()},years:DatePickerYears}),this.clear=function(){model.$setViewValue(null),model.$render(),this.view.date=new Date,this.selectedDate=new Date(this.view.date.getTime()),this.updateView(),_close()},this.close=function(){$rootScope.$broadcast("datepicker:close")},this.goToNextMonth=function(){var currentDate=this.view.date.getDate(),currentMonth=this.view.date.getMonth(),currentYear=now.getFullYear(),year=11===currentMonth?this.view.date.getFullYear()+1:this.view.date.getFullYear(),month=11===currentMonth?0:currentMonth+1,days=_daysInMonth(year,month),date=currentDate>days?days:currentDate;this.view.date=new Date(year,month,date,0,0,0),this.view.year=year,angular.extend(this,{disableNextMonth:year===currentYear+1&&11===month,disablePreviousMonth:year===currentYear&&month===now.getMonth()}),this.updateView()},this.goToPreviousMonth=function(){var currentDate=this.view.date.getDate(),currentMonth=this.view.date.getMonth(),currentYear=now.getFullYear(),year=currentMonth?this.view.date.getFullYear():this.view.date.getFullYear()-1,month=currentMonth?currentMonth-1:11,days=_daysInMonth(year,month),date=currentDate>days?days:currentDate;this.view.date=new Date(year,month,date,0,0,0),this.view.year=year,angular.extend(this,{disableNextMonth:year===currentYear+1&&11===month,disablePreviousMonth:year===currentYear&&month===now.getMonth()}),this.updateView()},this.selectDay=function(day){this.selectedDate.setDate(day.value),this.view.date=new Date(this.selectedDate.getTime()),this.updateView(),_update(this.view.date)},this.selectToday=function(){this.view.date=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0),this.selectedDate=new Date(this.view.date.getTime()),this.updateView(),_update(this.view.date),_close()},this.selectYear=function(){var currentDate=this.view.date.getDate(),currentMonth=this.view.date.getMonth(),currentYear=now.getFullYear(),year=this.view.date.getFullYear(),days=_daysInMonth(year,currentMonth),date=currentDate>days?days:currentDate;this.view.date=new Date(year,currentMonth,date,0,0,0),this.view.year=year,angular.extend(this,{disableNextMonth:year===currentYear+1&&11===currentMonth,disablePreviousMonth:year===currentYear&&currentMonth===now.getMonth()}),this.updateView()},this.updateView=function(){this.view.rows=_getRows(this.view.date,this.selectedDate||now)},$element.on("click",_open),$scope.$on("datepicker:close",_close)}function materializeDatePickerDirective(){return{controller:"MaterializeDatePickerCtrl",controllerAs:"MaterializeDatePicker",replace:!1,require:"ngModel",restrict:"AE",scope:!0}}MaterializeDatePickerCtrl.$inject=["$compile","$element","$filter","$rootScope","$scope","$templateCache","DatePickerYears"],angular.module("angularMaterializeDatePicker",["angularMaterializeDatePickerTemplate"]).constant("DatePickerYears",_getYears()).controller("MaterializeDatePickerCtrl",MaterializeDatePickerCtrl).directive("materializeDatePicker",materializeDatePickerDirective)}(),angular.module("angularMaterializeDatePickerTemplate",[]).run(["$templateCache",function($templateCache){$templateCache.put("angular-materializecss-datepicker.tpl.html",'<div class="picker picker--opened picker--focused" id="date-picker">\n	<div class="picker__holder">\n		<div class="picker__frame">\n			<div class="picker__wrap">\n				<div class="picker__box">\n					<div class="picker__date-display">\n						<div class="picker__weekday-display">\n							{{MaterializeDatePicker.selectedDate | date:\'EEEE\'}}\n						</div>\n						<div class="picker__month-display">\n							<div>\n								{{MaterializeDatePicker.selectedDate | date:\'MMMM\'}}\n							</div>\n						</div>\n\n						<div class="picker__day-display">\n							<div>\n								{{MaterializeDatePicker.selectedDate | date:\'dd\'}}\n							</div>\n						</div>\n\n						<div class="picker__year-display">\n							<div>\n								{{MaterializeDatePicker.selectedDate | date:\'yyyy\'}}\n							</div>\n						</div>\n					</div>\n\n					<div class="picker__calendar-container">\n						<div class="picker__header">\n							<div class="picker__month">\n								{{MaterializeDatePicker.view.date | date: \'MMMM\'}}\n							</div>\n\n							<select class="picker__select--year browser-default" title="Select a year" ng-model="MaterializeDatePicker.view.year" ng-options="year for year in MaterializeDatePicker.years" ng-change="MaterializeDatePicker.updateView()">\n							</select>\n\n							<div class="picker__nav--prev" title="Previous month" ng-disabled="MaterializeDatePicker.disablePreviousMonth" ng-click="MaterializeDatePicker.goToPreviousMonth()"></div>\n							<div class="picker__nav--next" title="Next month" ng-disabled="MaterializeDatePicker.disableNextMonth" ng-click="MaterializeDatePicker.goToNextMonth()"></div>\n						</div>\n\n						<table class="picker__table">\n							<thead>\n								<tr>\n									<th class="picker__weekday" title="Sunday">\n										S\n									</th>\n									<th class="picker__weekday" title="Monday">\n										M\n									</th>\n									<th class="picker__weekday" title="Tuesday">\n										T\n									</th>\n									<th class="picker__weekday" title="Wednesday">\n										W\n									</th>\n									<th class="picker__weekday" title="Thursday">\n										T\n									</th>\n									<th class="picker__weekday" title="Friday">\n										F\n									</th>\n									<th class="picker__weekday" title="Saturday">\n										S\n									</th>\n								</tr>\n							</thead>\n\n							<tbody>\n								<tr ng-repeat="row in MaterializeDatePicker.view.rows track by $index">\n									<td ng-repeat="day in row track by $index" ng-click="MaterializeDatePicker.selectDay(day)">\n										<div class="picker__day" ng-class="{\'picker__day--outfocus\': !day.visible, \'picker__day--infocus\': day.visible, \'picker__day--selected\': day.selected, \'picker__day--highlighted\': day.isToday}">\n											{{day.value}}\n										</div>\n									</td>\n								</tr>\n							</tbody>\n						</table>\n					</div>\n					<div class="picker__footer">\n						<button class="btn-flat picker__today" ng-click="MaterializeDatePicker.selectToday()">\n							Today\n						</button>\n\n						<button class="btn-flat picker__clear" ng-click="MaterializeDatePicker.clear()">\n							Clear\n						</button>\n\n						<button class="btn-flat picker__close" ng-click="MaterializeDatePicker.close()">\n							Close\n						</button>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>')}]);